<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jean & Len – Vendor Sales Dashboard 2025</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
  :root {
    --bg: #f2ece7;
    --card: #ffffff;
    --border: #e6dcce;
    --text: #221e1b;
    --text-muted: #7a6f66;
    --accent: #3f5a3f;
    --green: #4a7c59;
    --red: #e52427;
    --orange: #d97706;
    --yellow: #ca8a04;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Poppins', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }

  /* HEADER */
  .header {
    background: var(--accent);
    color: #fff;
    padding: 28px 40px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 12px;
  }
  .header h1 { font-size: 1.5rem; font-weight: 700; letter-spacing: -0.02em; }
  .header .subtitle { font-size: 0.82rem; opacity: 0.75; margin-top: 3px; }
  .header .badge {
    background: rgba(255,255,255,0.18);
    border: 1px solid rgba(255,255,255,0.3);
    border-radius: 20px;
    padding: 5px 14px;
    font-size: 0.78rem;
    font-weight: 500;
    white-space: nowrap;
  }

  /* LAYOUT */
  .container { max-width: 1400px; margin: 0 auto; padding: 32px 24px; }
  .section-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--accent);
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--border);
    letter-spacing: 0.01em;
  }

  /* KPI CARDS */
  .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 32px; }
  .kpi-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px 24px;
    position: relative;
    overflow: hidden;
  }
  .kpi-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    background: var(--accent);
  }
  .kpi-label { font-size: 0.75rem; font-weight: 500; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 6px; }
  .kpi-value { font-size: 1.9rem; font-weight: 700; color: var(--text); line-height: 1; }
  .kpi-sub { font-size: 0.75rem; color: var(--text-muted); margin-top: 4px; }

  /* CHARTS GRID */
  .charts-grid { display: grid; grid-template-columns: 340px 1fr; gap: 20px; margin-bottom: 32px; }
  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
  }
  .chart-wrap { position: relative; }
  .chart-wrap canvas { display: block; }

  /* DONUT LEGEND */
  .donut-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0; margin-top: 16px; }
  .legend-item {
    display: flex;
    align-items: center;
    gap: 7px;
    padding: 4px 0;
    font-size: 0.72rem;
    color: var(--text);
  }
  .legend-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
  .legend-pct { font-weight: 600; margin-left: auto; color: var(--text-muted); font-size: 0.7rem; }

  /* DATA TABLE */
  .table-wrap { overflow-x: auto; margin-bottom: 32px; }
  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.82rem;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
  }
  thead th {
    background: var(--accent);
    color: #fff;
    padding: 11px 12px;
    text-align: right;
    font-weight: 600;
    font-size: 0.75rem;
    white-space: nowrap;
  }
  thead th:first-child { text-align: left; min-width: 180px; }
  tbody tr { border-bottom: 1px solid var(--border); }
  tbody tr:last-child { border-bottom: none; }
  tbody tr:nth-child(even) { background: #faf7f4; }
  tbody tr:hover { background: #f0ebe4; }
  tbody td {
    padding: 9px 12px;
    text-align: right;
    white-space: nowrap;
  }
  tbody td:first-child { text-align: left; font-weight: 500; }
  .total-row td { background: #eef2ee !important; font-weight: 700; color: var(--accent); border-top: 2px solid var(--border); }
  .pct-pill {
    display: inline-block;
    background: #e8f0e8;
    color: var(--accent);
    border-radius: 4px;
    padding: 1px 5px;
    font-size: 0.68rem;
    font-weight: 600;
    margin-left: 4px;
  }

  /* RETURNS TABLE */
  .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 32px; }
  .ret-green { color: #166534; background: #dcfce7; }
  .ret-orange { color: #92400e; background: #fef3c7; }
  .ret-red { color: #991b1b; background: #fee2e2; }
  .ret-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
    min-width: 60px;
    justify-content: center;
  }

  /* TOP PRODUCTS */
  .top-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 32px; }
  .top-cat-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px 18px;
  }
  .top-cat-title {
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--accent);
    margin-bottom: 10px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border);
  }
  .top-prod {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    padding: 6px 0;
    border-bottom: 1px solid #f0ebe4;
  }
  .top-prod:last-child { border-bottom: none; }
  .top-rank {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--accent);
    color: #fff;
    font-size: 0.65rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 1px;
  }
  .top-prod-title { font-size: 0.72rem; color: var(--text); line-height: 1.4; flex: 1; }
  .top-prod-rev { font-size: 0.72rem; font-weight: 700; color: var(--green); white-space: nowrap; }

  /* FOOTER */
  .footer { text-align: center; font-size: 0.72rem; color: var(--text-muted); padding: 20px 0; border-top: 1px solid var(--border); margin-top: 8px; }

  @media (max-width: 900px) {
    .kpi-grid { grid-template-columns: 1fr 1fr; }
    .charts-grid { grid-template-columns: 1fr; }
    .two-col { grid-template-columns: 1fr; }
    .top-grid { grid-template-columns: 1fr 1fr; }
  }
  @media (max-width: 600px) {
    .kpi-grid { grid-template-columns: 1fr; }
    .top-grid { grid-template-columns: 1fr; }
    .header { padding: 20px; }
  }
</style>
</head>
<body>

<div class="header">
  <div>
    <h1>Jean &amp; Len – Vendor Sales Dashboard</h1>
    <div class="subtitle">Amazon Vendor · Manufacturing View · Jahresumsatz 2025 · 7 Märkte</div>
  </div>
  <div class="badge">Stand: 22.02.2026</div>
</div>

<div class="container">

  <!-- KPI CARDS -->
  <div class="kpi-grid">
    <div class="kpi-card">
      <div class="kpi-label">Gesamtumsatz (Ordered)</div>
      <div class="kpi-value">9,19 Mio. €</div>
      <div class="kpi-sub">01.01. – 31.12.2025</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Verkaufte Units</div>
      <div class="kpi-value">1,83 Mio.</div>
      <div class="kpi-sub">Ordered Units gesamt</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Ø Return Rate</div>
      <div class="kpi-value">0,60 %</div>
      <div class="kpi-sub">Customer Returns / Ordered Units</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">DE-Marktanteil</div>
      <div class="kpi-value">84,1 %</div>
      <div class="kpi-sub">Deutschland dominiert klar</div>
    </div>
  </div>

  <!-- CHARTS: Donut + Stacked Bar -->
  <h2 class="section-title">Umsatzverteilung nach Kategorie</h2>
  <div class="charts-grid">
    <!-- Donut -->
    <div class="card">
      <div class="chart-wrap" style="height:280px;">
        <canvas id="donutChart"></canvas>
      </div>
      <div class="donut-grid" id="donutLegend"></div>
    </div>
    <!-- Stacked Bar -->
    <div class="card">
      <div class="chart-wrap" style="height:380px;">
        <canvas id="stackedBar"></canvas>
      </div>
    </div>
  </div>

  <!-- REVENUE MATRIX TABLE -->
  <h2 class="section-title">Umsatz-Matrix: Kategorie × Land (EUR)</h2>
  <div class="table-wrap card" style="padding:0;">
    <table id="matrixTable"></table>
  </div>

  <!-- RETURNS + CATEGORY TOTALS -->
  <div class="two-col">
    <!-- Returns by Category -->
    <div>
      <h2 class="section-title">Return-Quote pro Kategorie</h2>
      <div class="card" style="padding:0;">
        <table id="returnsTable"></table>
      </div>
    </div>
    <!-- Category Revenue Summary -->
    <div>
      <h2 class="section-title">Kategorie-Übersicht</h2>
      <div class="card" style="padding:0;">
        <table id="catSummaryTable"></table>
      </div>
    </div>
  </div>

  <!-- TOP PRODUCTS PER CATEGORY -->
  <h2 class="section-title">Top-Produkte pro Kategorie (Top 3 nach Umsatz)</h2>
  <div class="top-grid" id="topProdsGrid"></div>

  <div class="footer">Jean &amp; Len GmbH · Vendor Sales Dashboard 2025 · Daten: Amazon Vendor Central (Manufacturing View) · Erstellt: 25.02.2026</div>
</div>

<script>
const DATA = {
  "grand_total": 9187609,
  "total_units": 1826696,
  "total_returns_rate": 0.6,
  "de_pct": 84.1,
  "cats_sorted": ["Nachfüller","Duft & Lifestyle","Handseife & Hand Wash","Duschgel & Körperwäsche","Sonstiges","Handcreme & Handbalsam","Sonnenschutz & After Sun","Shampoo","Haar-Treatments","Sets & Adventskalender","Körperpflege","Conditioner","Haushalt & Reinigung","Gesichtspflege","Deodorant","Lippenpflege"],
  "cat_totals": {"Nachfüller":{"rev":2371936,"units":259840,"returns":1099,"pct":25.8,"ret_rate":0.42},"Duft & Lifestyle":{"rev":922736,"units":131038,"returns":1647,"pct":10.0,"ret_rate":1.26},"Handseife & Hand Wash":{"rev":771215,"units":169671,"returns":828,"pct":8.4,"ret_rate":0.49},"Duschgel & Körperwäsche":{"rev":733009,"units":237229,"returns":1353,"pct":8.0,"ret_rate":0.57},"Sonstiges":{"rev":693620,"units":117819,"returns":1239,"pct":7.5,"ret_rate":1.05},"Handcreme & Handbalsam":{"rev":649372,"units":212166,"returns":1590,"pct":7.1,"ret_rate":0.75},"Sonnenschutz & After Sun":{"rev":602299,"units":104186,"returns":476,"pct":6.6,"ret_rate":0.46},"Shampoo":{"rev":599910,"units":187551,"returns":839,"pct":6.5,"ret_rate":0.45},"Haar-Treatments":{"rev":455838,"units":128417,"returns":527,"pct":5.0,"ret_rate":0.41},"Sets & Adventskalender":{"rev":410049,"units":19669,"returns":276,"pct":4.5,"ret_rate":1.40},"Körperpflege":{"rev":285171,"units":71471,"returns":276,"pct":3.1,"ret_rate":0.39},"Conditioner":{"rev":235950,"units":68702,"returns":309,"pct":2.6,"ret_rate":0.45},"Haushalt & Reinigung":{"rev":167607,"units":39506,"returns":264,"pct":1.8,"ret_rate":0.67},"Gesichtspflege":{"rev":158593,"units":26638,"returns":112,"pct":1.7,"ret_rate":0.42},"Deodorant":{"rev":87053,"units":35206,"returns":121,"pct":0.9,"ret_rate":0.34},"Lippenpflege":{"rev":43251,"units":17587,"returns":42,"pct":0.5,"ret_rate":0.24}},
  "cat_country": {"Nachfüller":{"DE":{"rev":2254701,"units":252138},"IT":{"rev":63879,"units":4045},"ES":{"rev":14826,"units":941},"FR":{"rev":5977,"units":358},"NL":{"rev":16395,"units":1097},"GB":{"rev":3847,"units":303},"SE":{"rev":3837,"units":370}},"Duft & Lifestyle":{"DE":{"rev":658073,"units":97568},"IT":{"rev":18787,"units":2011},"ES":{"rev":5249,"units":544},"FR":{"rev":208636,"units":26263},"NL":{"rev":3654,"units":634},"GB":{"rev":1823,"units":207},"SE":{"rev":81,"units":8}},"Handseife & Hand Wash":{"DE":{"rev":693863,"units":161284},"IT":{"rev":24620,"units":2920},"ES":{"rev":17872,"units":1917},"FR":{"rev":1305,"units":296},"NL":{"rev":11905,"units":870},"GB":{"rev":16104,"units":1495},"SE":{"rev":2671,"units":257}},"Duschgel & Körperwäsche":{"DE":{"rev":717408,"units":234429},"IT":{"rev":0,"units":0},"ES":{"rev":2075,"units":359},"FR":{"rev":753,"units":102},"NL":{"rev":646,"units":103},"GB":{"rev":9028,"units":1044},"SE":{"rev":2664,"units":1083}},"Sonstiges":{"DE":{"rev":39353,"units":4446},"IT":{"rev":198832,"units":35922},"ES":{"rev":308151,"units":46791},"FR":{"rev":80672,"units":15225},"NL":{"rev":17766,"units":3481},"GB":{"rev":67,"units":3},"SE":{"rev":16164,"units":4382}},"Handcreme & Handbalsam":{"DE":{"rev":602559,"units":207267},"IT":{"rev":20933,"units":2055},"ES":{"rev":11613,"units":1121},"FR":{"rev":0,"units":0},"NL":{"rev":239,"units":21},"GB":{"rev":12014,"units":1097},"SE":{"rev":1444,"units":307}},"Sonnenschutz & After Sun":{"DE":{"rev":533652,"units":96184},"IT":{"rev":10525,"units":1192},"ES":{"rev":36413,"units":3717},"FR":{"rev":9370,"units":1482},"NL":{"rev":8277,"units":838},"GB":{"rev":0,"units":0},"SE":{"rev":2419,"units":492}},"Shampoo":{"DE":{"rev":537308,"units":176147},"IT":{"rev":39666,"units":7267},"ES":{"rev":0,"units":0},"FR":{"rev":9144,"units":1399},"NL":{"rev":6499,"units":1603},"GB":{"rev":5866,"units":723},"SE":{"rev":621,"units":213}},"Haar-Treatments":{"DE":{"rev":407085,"units":120172},"IT":{"rev":26773,"units":4355},"ES":{"rev":7897,"units":1383},"FR":{"rev":1591,"units":248},"NL":{"rev":4350,"units":893},"GB":{"rev":5489,"units":641},"SE":{"rev":1810,"units":508}},"Sets & Adventskalender":{"DE":{"rev":380264,"units":17863},"IT":{"rev":13037,"units":783},"ES":{"rev":13399,"units":790},"FR":{"rev":87,"units":5},"NL":{"rev":2057,"units":145},"GB":{"rev":32,"units":2},"SE":{"rev":987,"units":73}},"Körperpflege":{"DE":{"rev":252988,"units":65835},"IT":{"rev":25106,"units":4257},"ES":{"rev":932,"units":173},"FR":{"rev":479,"units":84},"NL":{"rev":3301,"units":558},"GB":{"rev":10,"units":3},"SE":{"rev":1783,"units":437}},"Conditioner":{"DE":{"rev":220848,"units":66641},"IT":{"rev":5816,"units":697},"ES":{"rev":0,"units":0},"FR":{"rev":1022,"units":159},"NL":{"rev":3491,"units":570},"GB":{"rev":4423,"units":550},"SE":{"rev":273,"units":64}},"Haushalt & Reinigung":{"DE":{"rev":152121,"units":36525},"IT":{"rev":0,"units":0},"ES":{"rev":0,"units":0},"FR":{"rev":0,"units":0},"NL":{"rev":15471,"units":2978},"GB":{"rev":0,"units":0},"SE":{"rev":0,"units":0}},"Gesichtspflege":{"DE":{"rev":150555,"units":25494},"IT":{"rev":1945,"units":268},"ES":{"rev":2954,"units":353},"FR":{"rev":2391,"units":407},"NL":{"rev":252,"units":32},"GB":{"rev":0,"units":0},"SE":{"rev":247,"units":44}},"Deodorant":{"DE":{"rev":83399,"units":34213},"IT":{"rev":2021,"units":471},"ES":{"rev":0,"units":0},"FR":{"rev":0,"units":0},"NL":{"rev":581,"units":127},"GB":{"rev":7,"units":1},"SE":{"rev":728,"units":307}},"Lippenpflege":{"DE":{"rev":42946,"units":17509},"IT":{"rev":258,"units":63},"ES":{"rev":0,"units":0},"FR":{"rev":0,"units":0},"NL":{"rev":0,"units":0},"GB":{"rev":0,"units":0},"SE":{"rev":16,"units":4}}},
  "cat_top3": {"Nachfüller":[{"asin":"B085Z1SP6J","title":"Jean & Len Hand & Body Wash Rosemary und Ginger im Nachfüllbeutel, reinigt und pflegt die Haut","rev":1353031},{"asin":"B078VBX61T","title":"Jean & Len Handseife Rosemary & Ginger, reinigt beanspruchte Hände, Flüssigseife im nachfüllbaren Pumpspender, 250 ml","rev":300776},{"asin":"B092V7KGMQ","title":"Jean & Len Hand & Body Wash Rosemary und Ginger im Kanister, reinigt und pflegt die Haut","rev":251287}],"Sets & Adventskalender":[{"asin":"B0FL24DH5M","title":"Jean & Len Adventskalender 2025, weihnachtliche 3D DIY-Szenerie, inklusive zwei Produkte","rev":161255},{"asin":"B0DMT2G73R","title":"Jean & Len Haarpflege Set Rosemary & Ginger für trockenes und glanzloses Haar","rev":50643},{"asin":"B0DMSZCL7H","title":"Jean & Len Haarpflege Set Rosemary & Ginger für trockenes und glanzloses Haar","rev":48500}],"Handseife & Hand Wash":[{"asin":"B07XCLTNB7","title":"Jean & Len Hand & Body Wash Rosemary und Ginger, reinigt und pflegt die Haut, Würzig-frischer Duft","rev":183510},{"asin":"B0DMFM92B6","title":"Jean & Len Handseife Bergamot & Cedarwood, reinigt beanspruchte Hände","rev":100711},{"asin":"B0CN19FVL5","title":"Jean & Len Hand & Body Cleanser Bergamot & Cedarwood, für ein duftendes Reinigungserlebnis","rev":78272}],"Sonnenschutz & After Sun":[{"asin":"B0B1J27BXY","title":"Jean & Len Sensitiv Sonnenspray 50 LSF wasserfest, für empfindliche Haut","rev":176335},{"asin":"B01DSTM0ZW","title":"Jean & Len Sensitiv Sonnenspray 30 LSF wasserfest, für empfindliche Haut","rev":90586},{"asin":"B092V6BVLJ","title":"Jean & Len Sensitiv Sonnencreme 50+ LSF wasserfest, Sofortschutz für empfindliche Haut","rev":69961}],"Handcreme & Handbalsam":[{"asin":"B085ZCQ7Q2","title":"Jean & Len Sehr geile Handcreme Rosemary & Ginger, mit Urea, Handpflege für trockene Hände","rev":136437},{"asin":"B0CN3KV3X2","title":"Jean & Len Heavenly Hand- & Body Balm Rosemary & Ginger, für ein duftendes Pflegeerlebnis","rev":97176},{"asin":"B0DF7QFSZ8","title":"Jean & Len Heavenly Hand- & Body Balm Bergamot & Cedarwood","rev":49414}],"Haar-Treatments":[{"asin":"B0CV4GJ575","title":"Jean & Len Beat The Heat Hitzeschutzspray, mit Mango Duft, leichte Konsistenz","rev":80599},{"asin":"B0CV42KNY6","title":"Jean & Len Haartonikum Rosmarin, wirkt anregend, regt das Haarwachstum an","rev":72595},{"asin":"B0DG9S89YW","title":"Jean & Len Hair Mask Rosemary und Ginger, für stark strapaziertes, trockenes und glanzloses Haar","rev":33617}],"Shampoo":[{"asin":"B0BVWMYMFX","title":"Jean & Len Traumlocken Shampoo Reiswasser & Açaibeere, für lockiges & welliges Haar","rev":72458},{"asin":"B0DG9LDPB9","title":"Jean & Len Feuchtigkeit Shampoo Rosemary & Ginger, für trockenes und sprödes Haar","rev":70773},{"asin":"B092V71TDJ","title":"Jean & Len Volumen Shampoo Holunder & Jasmin, für kraftloses und feines Haar","rev":37398}],"Duft & Lifestyle":[{"asin":"B0CN1G8V9Q","title":"Jean & Len Scent Experience Rosemary & Ginger, Eau de Toilette mit Rosmarin & Ingwer","rev":61671},{"asin":"B0C8621QK5","title":"Jean & Len Duftkerze Amber & Vanilla, für gemütliche Abende Zuhause, Handgemacht","rev":60600},{"asin":"B0BSG1Y9WX","title":"Jean & Len Rosemary & Ginger Eau de Parfum, würzig-frischer Duft nach Rosmarin & Ingwer","rev":59714}],"Duschgel & Körperwäsche":[{"asin":"B0CNH86WTH","title":"Jean & Len Vitalizing Shower Gel To Mousse Rosemary & Ginger, mit Mandel-, Jojobaöl","rev":58926},{"asin":"B0CQM4DMDH","title":"Jean & Len Reichhaltiger Traumschaum Kokos & Hafermilch, Gel-to-Mousse Technologie","rev":57446},{"asin":"B0CWL5B42T","title":"Jean & Len Duschgel Orange & Ingwer, pH-hautideal, erfrischendes Duscherlebnis","rev":53135}],"Conditioner":[{"asin":"B0BTDVS3WG","title":"Jean & Len Traumlocken Conditioner Reiswasser & Açaibeere, für lockiges & welliges Haar","rev":54651},{"asin":"B0DG9FM6T4","title":"Jean & Len Conditioner Feuchtigkeit Rosemary & Ginger, für stumpfes und glanzloses Haar","rev":31873},{"asin":"B07ZTDSPKD","title":"Jean & Len Conditioner Repair Kokos & Macadamia, für geschädigtes und kraftloses Haar","rev":29588}],"Haushalt & Reinigung":[{"asin":"B0CG9X4D83","title":"Jean & Len Faserschonendes Feinwaschmittel Wolle & Feines Veilchen & Jasmin","rev":35709},{"asin":"B0D1RJT6N4","title":"Jean & Len Universalwaschmittel Wasserlilie & Hibiskus, Fasertiefe Reinigung","rev":25753},{"asin":"B0CP62LPJW","title":"Jean & Len Body Ceremony Peony und Lychee Hand- und Körperreiniger","rev":17287}],"Gesichtspflege":[{"asin":"B0DL5KYFR1","title":"Jean & Len Ultimate Glow Cream, ideal für jeden Hauttyp, sorgt für ein strahlendes Hautbild","rev":28642},{"asin":"B0CDL6F2KK","title":"Jean & Len Feuchtigkeitsspendende Gesichtscreme Kaktusfeige & Hyaluron","rev":22800},{"asin":"B0DLH5XMY7","title":"Jean & Len Hydrating Booster Serum, tiefenwirksame 24h-Feuchtigkeit","rev":14422}],"Körperpflege":[{"asin":"B0CWLFXF5X","title":"Jean & Len Body Butter Cranberry & Vanille, versorgt die Haut ausreichend mit Feuchtigkeit","rev":52947},{"asin":"B08FC3HPVG","title":"Jean & Len Fußcreme Sheabutter & Calendula, für trockene & beanspruchte Haut","rev":25102},{"asin":"B085ZKWF2T","title":"Jean & Len Reichhaltige Bodymilk mit Sheabutter, pflegt trockene Haut intensiv","rev":24885}],"Lippenpflege":[{"asin":"B0C8B2V31C","title":"Jean & Len Intensiv pflegender Lip Balm, für geschmeidig weiche Lippen","rev":22770},{"asin":"B0C5RXYHJ3","title":"Jean & Len Sensitiver Lip Balm mit Bio-Sheabutter & Bio-Mandelöl","rev":15690},{"asin":"B0F4KSKKXL","title":"Jean & Len Lip Balm Beere, bewahrt die Lippenhaut vor dem Austrocknen","rev":3734}],"Deodorant":[{"asin":"B092V85LL8","title":"Jean & Len Deobalsam Baumwolle, schenkt auf natürliche Weise bis zu 24h Deo-Schutz","rev":22278},{"asin":"B0BFJ7ZZTX","title":"Jean & Len Deobalsam Rosenwasser, schenkt auf natürliche Weise bis zu 24h Deo-Schutz","rev":12741},{"asin":"B092V8PPZF","title":"Jean & Len Deobalsam Wasserlilie, schenkt auf natürliche Weise bis zu 24h Deo-Schutz","rev":11167}],"Sonstiges":[{"asin":"B0FPGGP951","title":"Jean & Len Aufbewahrungskorb, rund, aus Baumwolle und Stroh","rev":3460},{"asin":"B0984DBNS9","title":"Jean & Len Desinfektionsmittel für Hände, Hautschonender Hand Sanitizer","rev":3240},{"asin":"B0FPM97YN3","title":"Jean & Len Kosmetikspiegel, aus Eisen, robust und Kratzfest, Mattes & stilvolles Finish","rev":2866}]},
  "countries": ["DE","IT","ES","FR","NL","GB","SE"]
};

const PALETTE = [
  '#3f5a3f','#4a7c59','#6aab7d','#a8d5b5','#c8e6d5',
  '#7c4f3f','#b8735a','#e09070','#d4a574','#e8c89a',
  '#3f4f7c','#5a6fab','#8a9fd4','#b5bfe8','#6b3f7c',
  '#b85ab8'
];

const cats = DATA.cats_sorted;
const countries = DATA.countries;
const countryLabels = {'DE':'Deutschland','IT':'Italien','ES':'Spanien','FR':'Frankreich','NL':'Niederlande','GB':'Großbritannien','SE':'Schweden'};

// DONUT CHART
(function() {
  const ctx = document.getElementById('donutChart').getContext('2d');
  // Filter out Sonstiges from donut for cleaner view, show separate
  const chartCats = cats.filter(c => c !== 'Sonstiges').concat(['Sonstiges']);
  const vals = chartCats.map(c => DATA.cat_totals[c].rev);
  const colors = chartCats.map((c, i) => PALETTE[i % PALETTE.length]);

  new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: chartCats,
      datasets: [{ data: vals, backgroundColor: colors, borderWidth: 2, borderColor: '#fff', hoverOffset: 8 }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      cutout: '62%',
      plugins: {
        legend: { display: false },
        tooltip: {
          callbacks: {
            label: ctx => ` ${ctx.label}: ${(ctx.raw/1000).toFixed(0)}k€ (${DATA.cat_totals[ctx.label].pct}%)`
          }
        }
      }
    }
  });

  // Legend
  const legend = document.getElementById('donutLegend');
  chartCats.forEach((cat, i) => {
    const item = document.createElement('div');
    item.className = 'legend-item';
    item.innerHTML = `<span class="legend-dot" style="background:${colors[i]}"></span><span>${cat}</span><span class="legend-pct">${DATA.cat_totals[cat].pct}%</span>`;
    legend.appendChild(item);
  });
})();

// STACKED BAR CHART
(function() {
  const ctx = document.getElementById('stackedBar').getContext('2d');
  // Show top 8 categories by revenue for readability
  const topCats = cats.slice(0, 9).filter(c => c !== 'Sonstiges');

  const datasets = topCats.map((cat, i) => ({
    label: cat,
    data: countries.map(c => Math.round((DATA.cat_country[cat][c]?.rev || 0) / 1000)),
    backgroundColor: PALETTE[i % PALETTE.length],
    borderWidth: 0,
    borderRadius: 2
  }));

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: countries.map(c => countryLabels[c] || c),
      datasets
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        x: { stacked: true, grid: { display: false }, ticks: { font: { family: 'Poppins', size: 11 } } },
        y: {
          stacked: true,
          grid: { color: '#e6dcce' },
          ticks: {
            font: { family: 'Poppins', size: 10 },
            callback: v => v + 'k€'
          },
          title: { display: true, text: 'Umsatz (Tsd. EUR)', font: { family: 'Poppins', size: 11 } }
        }
      },
      plugins: {
        legend: {
          position: 'bottom',
          labels: { font: { family: 'Poppins', size: 10 }, boxWidth: 12, padding: 10 }
        },
        tooltip: {
          callbacks: {
            label: ctx => ` ${ctx.dataset.label}: ${ctx.raw}k€`
          }
        }
      }
    }
  });
})();

// MATRIX TABLE
(function() {
  const table = document.getElementById('matrixTable');
  let html = '<thead><tr><th>Kategorie</th>';
  countries.forEach(c => { html += `<th>${c}</th>`; });
  html += '<th>Gesamt</th><th>Anteil</th></tr></thead><tbody>';

  cats.forEach(cat => {
    const total = DATA.cat_totals[cat].rev;
    html += `<tr><td>${cat}</td>`;
    countries.forEach(c => {
      const rev = DATA.cat_country[cat][c]?.rev || 0;
      html += `<td>${rev > 0 ? (rev/1000).toFixed(0)+'k' : '–'}</td>`;
    });
    html += `<td><strong>${(total/1000).toFixed(0)}k€</strong></td>`;
    html += `<td><span class="pct-pill">${DATA.cat_totals[cat].pct}%</span></td>`;
    html += '</tr>';
  });

  // Totals row
  html += '<tr class="total-row"><td>GESAMT</td>';
  countries.forEach(c => {
    const tot = cats.reduce((s, cat) => s + (DATA.cat_country[cat][c]?.rev || 0), 0);
    html += `<td>${(tot/1000).toFixed(0)}k</td>`;
  });
  html += `<td>${(DATA.grand_total/1000000).toFixed(2)} Mio. €</td><td>100%</td></tr>`;
  html += '</tbody>';
  table.innerHTML = html;
})();

// RETURNS TABLE
(function() {
  const table = document.getElementById('returnsTable');
  let html = '<thead><tr><th style="text-align:left;padding:11px 12px;background:var(--accent);color:#fff;font-size:0.75rem;font-weight:600;">Kategorie</th><th style="text-align:center;padding:11px 12px;background:var(--accent);color:#fff;font-size:0.75rem;font-weight:600;">Return Rate</th><th style="text-align:right;padding:11px 12px;background:var(--accent);color:#fff;font-size:0.75rem;font-weight:600;">Returns</th></tr></thead><tbody>';

  const sorted = [...cats].sort((a,b) => DATA.cat_totals[b].ret_rate - DATA.cat_totals[a].ret_rate);
  sorted.forEach(cat => {
    const rr = DATA.cat_totals[cat].ret_rate;
    const ret = DATA.cat_totals[cat].returns;
    let cls = rr < 0.5 ? 'ret-green' : rr <= 1.5 ? 'ret-orange' : 'ret-red';
    html += `<tr>
      <td style="padding:8px 12px;font-size:0.8rem;font-weight:500;">${cat}</td>
      <td style="padding:8px 12px;text-align:center;"><span class="ret-badge ${cls}">${rr.toFixed(2)}%</span></td>
      <td style="padding:8px 12px;text-align:right;font-size:0.8rem;color:var(--text-muted);">${ret.toLocaleString('de-DE')}</td>
    </tr>`;
  });
  html += '</tbody>';
  table.innerHTML = html;
})();

// CATEGORY SUMMARY TABLE
(function() {
  const table = document.getElementById('catSummaryTable');
  let html = '<thead><tr><th style="text-align:left;padding:11px 12px;background:var(--accent);color:#fff;font-size:0.75rem;font-weight:600;">Kategorie</th><th style="text-align:right;padding:11px 12px;background:var(--accent);color:#fff;font-size:0.75rem;font-weight:600;">Umsatz</th><th style="text-align:right;padding:11px 12px;background:var(--accent);color:#fff;font-size:0.75rem;font-weight:600;">Units</th><th style="text-align:right;padding:11px 12px;background:var(--accent);color:#fff;font-size:0.75rem;font-weight:600;">Ø Preis</th></tr></thead><tbody>';

  cats.forEach((cat, i) => {
    const d = DATA.cat_totals[cat];
    const avgPrice = d.units > 0 ? (d.rev / d.units).toFixed(2) : '–';
    const bg = i % 2 === 1 ? 'background:#faf7f4;' : '';
    html += `<tr style="${bg}">
      <td style="padding:8px 12px;font-size:0.79rem;font-weight:500;">${cat}</td>
      <td style="padding:8px 12px;text-align:right;font-size:0.79rem;font-weight:600;">${(d.rev/1000).toFixed(0)}k€</td>
      <td style="padding:8px 12px;text-align:right;font-size:0.79rem;color:var(--text-muted);">${d.units.toLocaleString('de-DE')}</td>
      <td style="padding:8px 12px;text-align:right;font-size:0.79rem;color:var(--text-muted);">${avgPrice}€</td>
    </tr>`;
  });
  html += '</tbody>';
  table.innerHTML = html;
})();

// TOP PRODUCTS GRID
(function() {
  const grid = document.getElementById('topProdsGrid');
  // Show all meaningful categories (not Sonstiges)
  const showCats = cats.filter(c => c !== 'Sonstiges');

  showCats.forEach((cat, ci) => {
    const prods = DATA.cat_top3[cat] || [];
    if (!prods.length) return;
    let prodsHtml = '';
    prods.forEach((p, i) => {
      const shortTitle = p.title.length > 72 ? p.title.substring(0, 72) + '…' : p.title;
      prodsHtml += `<div class="top-prod">
        <div class="top-rank">${i+1}</div>
        <div style="flex:1;">
          <div class="top-prod-title">${shortTitle}</div>
          <div style="font-size:0.67rem;color:var(--text-muted);margin-top:2px;">${p.asin}</div>
        </div>
        <div class="top-prod-rev">${(p.rev/1000).toFixed(0)}k€</div>
      </div>`;
    });
    grid.innerHTML += `<div class="top-cat-card">
      <div class="top-cat-title" style="border-left:3px solid ${PALETTE[ci % PALETTE.length]};padding-left:8px;">${cat}</div>
      ${prodsHtml}
    </div>`;
  });
})();
</script>
</body>
</html>
