<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J&L CEO Dashboard â€“ Q1 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #f2ece7; --card: #ffffff; --border: #e6dcce; --text: #221e1b;
            --muted: #8b8577; --accent: #3f5a3f; --green: #4a7c59; --yellow: #ba6a49;
            --red: #e52427; --blue: #3f5a3f; --orange: #ba6a49; --cyan: #647c64;
            --purple: #ed98df; --pink: #ed98df;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', -apple-system, sans-serif; background: var(--bg); color: var(--text); line-height: 1.5; }
        .container { max-width: 1200px; margin: 0 auto; padding: 24px 20px; }

        /* Header */
        .header { text-align: center; margin-bottom: 32px; }
        .header h1 { font-size: 28px; font-weight: 700; background: linear-gradient(135deg, #3f5a3f, #647c64); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .header .sub { color: var(--muted); font-size: 14px; margin-top: 4px; }
        .header .meta { color: var(--muted); font-size: 12px; margin-top: 8px; }
        .back-link { display: inline-block; margin-bottom: 16px; color: var(--accent); text-decoration: none; font-size: 13px; }
        .back-link:hover { text-decoration: underline; }

        /* Section titles */
        .section-title { font-size: 16px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--muted); margin: 40px 0 16px; padding-left: 12px; border-left: 3px solid var(--accent); }

        /* Cards */
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 20px; box-shadow: 0 2px 12px rgba(34,28,22,0.04); }

        /* Grids */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }

        /* Badges */
        .badge { display: inline-block; padding: 2px 10px; border-radius: 20px; font-size: 11px; font-weight: 600; }
        .badge-green { background: rgba(74,124,89,0.15); color: var(--green); }
        .badge-yellow { background: rgba(186,106,73,0.15); color: var(--yellow); }
        .badge-red { background: rgba(229,36,39,0.15); color: var(--red); }
        .badge-blue { background: rgba(63,90,63,0.15); color: var(--blue); }
        .badge-purple { background: rgba(237,152,223,0.15); color: var(--purple); }
        .badge-muted { background: rgba(139,133,119,0.15); color: var(--muted); }

        /* ===== SECTION 1: KPI Cards ===== */
        .kpi-card { position: relative; overflow: hidden; }
        .kpi-card .kpi-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .kpi-card .kpi-name { font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--muted); }
        .kpi-card .kpi-trend { font-size: 18px; }
        .kpi-card .kpi-values { display: flex; align-items: baseline; gap: 8px; margin-bottom: 8px; }
        .kpi-card .kpi-ist { font-size: 32px; font-weight: 800; }
        .kpi-card .kpi-ziel { font-size: 14px; color: var(--muted); }
        .kpi-card .kpi-bar { height: 8px; background: rgba(34,28,22,0.06); border-radius: 4px; overflow: hidden; margin-bottom: 10px; }
        .kpi-card .kpi-fill { height: 100%; border-radius: 4px; transition: width 0.6s ease; }
        .kpi-card .kpi-context { font-size: 12px; color: var(--muted); display: flex; align-items: center; gap: 6px; }
        .kpi-card .kpi-context strong { color: var(--text); }
        .kpi-pct { font-size: 14px; font-weight: 700; }

        /* ===== SECTION 2: Rocks ===== */
        .steine-summary { display: flex; gap: 16px; margin-bottom: 16px; flex-wrap: wrap; }
        .steine-summary .sum-item { font-size: 13px; font-weight: 600; }
        .stein-card { padding: 14px 16px; border-left: 3px solid var(--muted); }
        .stein-card.green { border-left-color: var(--green); }
        .stein-card.yellow { border-left-color: var(--yellow); }
        .stein-card.red { border-left-color: var(--red); }
        .stein-name { font-size: 14px; font-weight: 700; margin-bottom: 4px; }
        .stein-detail { font-size: 12px; color: var(--muted); }
        .stein-detail .owner { color: var(--accent); }
        .stein-meilenstein { font-size: 12px; color: var(--text); margin-top: 6px; }

        /* ===== SECTION 3: Fuck-ups ===== */
        .fuckup-card { border-left: 3px solid var(--red); padding: 16px; margin-bottom: 12px; }
        .fuckup-card.resolved { border-left-color: var(--green); opacity: 0.7; }
        .fuckup-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .fuckup-problem { font-size: 14px; font-weight: 700; }
        .fuckup-row { display: grid; grid-template-columns: auto 1fr; gap: 4px 12px; font-size: 13px; }
        .fuckup-label { color: var(--muted); font-weight: 600; text-transform: uppercase; font-size: 11px; }

        /* ===== SECTION 4: Roadmap ===== */
        .roadmap-row { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border-bottom: 1px solid var(--border); }
        .roadmap-row:last-child { border-bottom: none; }
        .roadmap-label { width: 180px; font-size: 13px; font-weight: 600; flex-shrink: 0; }
        .roadmap-track { flex: 1; height: 28px; position: relative; background: rgba(34,28,22,0.04); border-radius: 4px; }
        .roadmap-bar { position: absolute; height: 100%; border-radius: 4px; display: flex; align-items: center; padding: 0 8px; font-size: 11px; font-weight: 600; color: #fff; white-space: nowrap; overflow: hidden; }
        .roadmap-weeks { display: flex; justify-content: space-between; padding: 0 0 0 192px; margin-bottom: 4px; }
        .roadmap-weeks span { font-size: 10px; color: var(--muted); width: 0; text-align: center; }
        .roadmap-now { position: absolute; top: 0; bottom: 0; width: 2px; background: var(--red); z-index: 2; }
        .roadmap-now::after { content: 'Heute'; position: absolute; top: -16px; left: -14px; font-size: 9px; color: var(--red); font-weight: 600; }

        /* ===== SECTION 5: Innovation ===== */
        .innovation-card { display: flex; gap: 16px; align-items: flex-start; }
        .innovation-icon { font-size: 36px; flex-shrink: 0; width: 50px; text-align: center; }
        .innovation-content { flex: 1; }
        .innovation-name { font-size: 15px; font-weight: 700; margin-bottom: 4px; }
        .innovation-desc { font-size: 13px; color: var(--muted); margin-bottom: 8px; }
        .innovation-impact { font-size: 14px; font-weight: 700; color: var(--green); }
        .innovation-impact.planned { color: var(--yellow); }

        /* ===== SECTION 6: Artikelgruppen ===== */
        .kategorie-row { display: flex; align-items: center; gap: 12px; padding: 10px 0; border-bottom: 1px solid var(--border); }
        .kategorie-row:last-child { border-bottom: none; }
        .kategorie-name { width: 140px; font-size: 13px; font-weight: 600; flex-shrink: 0; }
        .kategorie-bar-wrap { flex: 1; height: 24px; background: rgba(34,28,22,0.04); border-radius: 4px; overflow: hidden; position: relative; }
        .kategorie-fill { height: 100%; border-radius: 4px; display: flex; align-items: center; padding: 0 8px; font-size: 11px; font-weight: 600; color: #fff; }
        .kategorie-values { width: 160px; text-align: right; font-size: 13px; flex-shrink: 0; }
        .kategorie-trend { width: 30px; text-align: center; font-size: 16px; flex-shrink: 0; }
        .kategorie-note { font-size: 12px; color: var(--muted); text-align: center; margin-top: 12px; padding: 12px; background: rgba(63,90,63,0.08); border-radius: 8px; }

        /* ===== UmsatzÃ¼bersicht ===== */
        .rev-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }
        .rev-card { position: relative; overflow: hidden; }
        .rev-card .rev-label { font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--muted); margin-bottom: 8px; }
        .rev-card .rev-total { font-size: 28px; font-weight: 800; margin-bottom: 4px; }
        .rev-card .rev-plan { font-size: 13px; color: var(--muted); margin-bottom: 10px; }
        .rev-card .rev-bar { height: 6px; background: rgba(34,28,22,0.06); border-radius: 3px; overflow: hidden; margin-bottom: 8px; }
        .rev-card .rev-fill { height: 100%; border-radius: 3px; }
        .rev-card .rev-detail { font-size: 12px; color: var(--muted); }

        /* Amazon LÃ¤nder Tabelle */
        .country-table { width: 100%; border-collapse: collapse; font-size: 13px; }
        .country-table th { text-align: left; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--muted); padding: 8px 12px; border-bottom: 1px solid var(--border); }
        .country-table th.num { text-align: right; }
        .country-table td { padding: 10px 12px; border-bottom: 1px solid var(--border); }
        .country-table td.num { text-align: right; font-variant-numeric: tabular-nums; }
        .country-table tr:last-child td { border-bottom: none; }
        .country-table .total-row { font-weight: 700; border-top: 2px solid var(--accent); }
        .country-table .total-row td { border-bottom: none; padding-top: 12px; }
        .country-flag { font-size: 16px; margin-right: 6px; }
        .pct-badge { display: inline-block; padding: 1px 6px; border-radius: 4px; font-size: 11px; font-weight: 600; }

        /* ===== Quick Links ===== */
        .quick-links { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .quick-link { display: block; text-decoration: none; padding: 20px; text-align: center; border-radius: 16px; background: var(--card); border: 1px solid var(--border); box-shadow: 0 2px 12px rgba(34,28,22,0.04); transition: all 0.2s; }
        .quick-link:hover { border-color: var(--accent); transform: translateY(-2px); }
        .quick-link .ql-icon { font-size: 32px; margin-bottom: 8px; }
        .quick-link .ql-title { font-size: 14px; font-weight: 700; color: var(--text); }
        .quick-link .ql-desc { font-size: 12px; color: var(--muted); margin-top: 2px; }

        /* Footer */
        .footer { text-align: center; color: var(--muted); font-size: 11px; margin-top: 48px; padding: 20px 0; border-top: 1px solid var(--border); }

        /* Responsive */
        @media (max-width: 900px) { .grid-3 { grid-template-columns: 1fr 1fr; } }
        @media (max-width: 600px) { .grid-3, .grid-2, .quick-links { grid-template-columns: 1fr; } .roadmap-label { width: 120px; } }
    </style>
    <script src="data.js"></script>
</head>
<body>
<div class="container">

<a href="index.html" class="back-link">&#8592; Alle Dashboards</a>

<div class="header">
    <h1>E-Commerce CEO Dashboard</h1>
    <div class="sub">Q1 2026 | Marc BÃ¶hle, CDO</div>
    <div class="meta" id="header-meta">Stand: 25.02.2026 | KW09 | Datenquellen: Jessis Reporting, Amazon Allocation, Power BI</div>
</div>

<!-- Datenstand-Leiste -->
<div id="freshnessBanner" style="display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-bottom:28px;"></div>

<!-- ===== DIESE WOCHE WICHTIG ===== -->
<div class="section-title">ðŸ“Œ Diese Woche wichtig</div>
<div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:32px;">
    <div class="card" style="border-left:4px solid var(--accent);">
        <div style="font-size:13px;font-weight:700;color:var(--accent);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:10px;">ðŸ›’ Webshop</div>
        <ul style="margin:0;padding-left:18px;font-size:13px;line-height:2;">
            <li><strong>Adressvalidierung fÃ¼r auslÃ¤ndische Kunden</strong> â€” spart ProblemfÃ¤lle bis in die Buchhaltung <span style="background:rgba(228,36,39,0.12);color:#e52427;font-size:10px;font-weight:700;padding:1px 6px;border-radius:4px;margin-left:4px;">HOCH</span></li>
            <li><strong>ROSI live schalten</strong> â€” eigener Chatbot fÃ¼r Beratung, Zendesk-Anbindung &amp; Entlastung Customer Service (inkl. DHL-Tracking im Chat)</li>
            <li><strong>Customer Journey Workshop</strong> â€” bessere FÃ¼hrung durch den Shop, Conversion-Potenzial heben</li>
        </ul>
    </div>
    <div class="card" style="border-left:4px solid var(--accent);">
        <div style="font-size:13px;font-weight:700;color:var(--accent);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:10px;">ðŸ“¦ Amazon</div>
        <ul style="margin:0;padding-left:18px;font-size:13px;line-height:2;">
            <li><strong>UK Expansion vorbereiten</strong> â€” Fulfilmentcrowd-Anbindung prÃ¼fen, Listing-Ãœbersetzungen fÃ¼r UK freigeben <span style="background:rgba(228,36,39,0.12);color:#e52427;font-size:10px;font-weight:700;padding:1px 6px;border-radius:4px;margin-left:4px;">HOCH</span></li>
            <li><strong>Budget-Kontrolle KW09</strong> â€” Tagesgenaues Monitoring nach Jessi-Update Montag; DE + FR Budget fÃ¼r KW10 freigeben</li>
            <li><strong>ACOS-Optimierung DE</strong> â€” Top-3-Kampagnen mit ACOS &gt; 30% identifizieren und Gebote anpassen</li>
        </ul>
    </div>
</div>

<!-- ===== SECTION 1: QUARTALSZIELE ===== -->
<div class="section-title">Quartalsziele Q1 â€“ Status</div>
<div class="grid-3" id="kpiGrid"></div>

<!-- ===== SECTION: UMSATZÃœBERSICHT ===== -->
<div class="section-title">UmsatzÃ¼bersicht â€“ Plan vs. Ist</div>
<div class="rev-grid" id="revGrid"></div>

<!-- ===== SECTION: AMAZON LÃ„NDER ===== -->
<div class="section-title">Amazon J&L â€“ Umsatz nach Land</div>
<div class="card" style="padding: 16px 20px; overflow-x: auto;" id="countryCard"></div>

<!-- ===== SECTION 2: ROCKS ===== -->
<div class="section-title">Rocks â€“ Accountability Tracker</div>
<div class="steine-summary" id="steineSummary"></div>
<div class="grid-3" id="steineGrid"></div>

<!-- ===== SECTION 3: BLOCKADEN & FUCK-UPS ===== -->
<div class="section-title">Aktuelle Blockaden & Fuck-ups</div>
<div id="fuckupList"></div>

<!-- ===== SECTION 4: MASSNAHMEN-ROADMAP ===== -->
<div class="section-title">MaÃŸnahmen-Roadmap Q1</div>
<div class="card" style="padding: 16px 20px;">
    <div id="roadmap"></div>
</div>

<!-- ===== SECTION 5: INNOVATION & AUTOMATISIERUNG ===== -->
<div class="section-title">E-Commerce Innovation & Automatisierung</div>
<div class="grid-2" id="innovationGrid"></div>

<!-- ===== SECTION 6: ARTIKELGRUPPEN ===== -->
<div class="section-title">Artikelgruppen â€“ Umsatzentwicklung</div>
<div class="card" style="padding: 20px;" id="kategorienCard"></div>

<!-- ===== SECTION 7: QUICK LINKS ===== -->
<div class="section-title">Detail-Dashboards</div>
<div class="quick-links">
    <a href="webshop.html" class="quick-link">
        <div class="ql-icon">&#128722;</div>
        <div class="ql-title">Webshop Dashboard</div>
        <div class="ql-desc">Umsatz, AOV, CR, Marketing-KanÃ¤le</div>
    </a>
    <a href="amazon.html" class="quick-link">
        <div class="ql-icon">&#127758;</div>
        <div class="ql-title">Amazon International</div>
        <div class="ql-desc">8 MÃ¤rkte, Budget Allocation, ROAS</div>
    </a>
</div>

<div class="footer" id="dashboardFooter"></div>

</div>

<script>
// ============================================================
//  DATEN â€“ Hier einfach editieren fÃ¼r wÃ¶chentliche Updates
// ============================================================

// --- Datenstand (fÃ¼r Freshness-Anzeige) ---
const datenstand = {
    webshop: { datum: "25.02.2026", quelle: "Jessis Reporting Excel" },
    amazon:  { datum: "KW7 (14.02.2026)", quelle: "Budget Tracker Excel" },
    dashboard: { datum: "26.02.2026", autor: "Marc / Claude" }
};

// --- Kern-KPIs ---
const kpis = [
    {
        name: "Webshop AOV",
        ist: 45.54, ziel: 49.15, unit: "â‚¬",
        trend: "up", // up, down, stable
        massnahme: "AOV-Booster Plugin (Rollout KW07)",
        color: "--orange"
    },
    {
        name: "Webshop CR",
        ist: 2.83, ziel: 2.81, unit: "%",
        trend: "up",
        massnahme: "CRO-Optimierung lÃ¤uft, fast am Ziel",
        color: "--yellow"
    },
    {
        name: "Amazon J&L (Q1 Umsatz)",
        ist: 1376070, ziel: 2147000, unit: "â‚¬",
        trend: "up",
        massnahme: "DE/USA KW1â€“7, UK KW1â€“6. IT Feb, ES/FR/NL/SE Jan eingetragen.",
        color: "--accent",
        linearPlan: 825769, // 2.147.000 * 5/13
        dataWeeks: 7,
        totalWeeks: 13
    }
];

// --- Rocks ---
const steine = [
    { nr: 1, name: "UK-Expansion", detail: "Ziel: 5.000 GBP/Woche (Break-even Pick & Pack)", owner: "Lena", status: "yellow", meilenstein: "5.000 GBP/Woche stabil erreichen", deadline: "Q1" },
    { nr: 2, name: "AOV-Booster", detail: "Shopware Plugin", owner: "Marc", status: "green", meilenstein: "Rollout + A/B-Test", deadline: "Feb" },
    { nr: 3, name: "Amazon USA", detail: "Launch 5 US Handseifen auf Amazon", owner: "Marc", status: "yellow", meilenstein: "Go-Live kurz bevor â€“ Launch bis 01.03.", deadline: "01.03." },
    { nr: 4, name: "OOS-Quote", detail: "Webshop aktuell ~2,1% (Ziel < 4%) â€“ wird noch geprÃ¼ft", owner: "Marc/Jessi", status: "green", meilenstein: "Quote unter 4% halten", deadline: "laufend" },
    { nr: 5, name: "Amazon TOX", detail: "Hybrid-Projekt gestartet, ext. Berater an Bord", owner: "Marc", status: "yellow", meilenstein: "Projekt-Abschluss in 4 Monaten", deadline: "Jun" },
    { nr: 6, name: "Vendor Chargebacks", detail: "Aktuell 0,73% â†’ Ziel < 0,5%", owner: "Kevin", status: "yellow", meilenstein: "Chargeback-Quote unter 0,5% senken", deadline: "Q2" },
    { nr: 7, name: "Home-Anteil", detail: "Webshop aktuell 11% â†’ Ziel 15%", owner: "Marc/Jessi", status: "yellow", meilenstein: "Home-Anteil auf 15% steigern", deadline: "Q2" },
    { nr: 8, name: "Amazon ProfitabilitÃ¤t", detail: "DB5 aktuell 13,4% â†’ Ziel 15%", owner: "Marc", status: "yellow", meilenstein: "DB5 auf 15% steigern", deadline: "Q2" },
    { nr: 9, name: "JahresgesprÃ¤che Amazon", detail: "Kopfkonditionen: 23,5% â†’ Ziel 20,5%", owner: "Marc", status: "red", meilenstein: "Konditionen auf 20,5% verhandeln", deadline: "Q1" }
];

// --- Fuck-ups & Blockaden ---
const fuckups = [
    { problem: "Amazon Vendor DE (JEBG3) â€“ Shipment Defects", impact: "Hohe Chargebacks, Vendor-Scoring gefÃ¤hrdet", massnahme: "Ursachenanalyse + Prozessfix mit Sherin", owner: "Marc/Sherin", deadline: "28.02.", status: "active" },
    { problem: "Google Ads auf 0â‚¬ seit KW04", impact: "Wichtiger Traffic-Kanal komplett pausiert", massnahme: "KlÃ¤rung mit Jessi â€“ geplant oder Problem?", owner: "Marc/Jessi", deadline: "14.02.", status: "active" },
    { problem: "Beiersdorf OHNE GEDÃ˜NS â€“ 46 Produkte", impact: "Produkte mÃ¼ssen umbenannt/ausgelistet werden", massnahme: "Liste mit Lynn finalisieren", owner: "Marc/Lynn", deadline: "17.02.", status: "active" },
    { problem: "USA GrÃ¼ndung â€“ Steuer/Logistik Setup", impact: "VerzÃ¶gert Amazon USA Launch", massnahme: "Priorisierung + ggf. Freelancer-Support", owner: "Marc", deadline: "Ende Feb", status: "active" }
];

// --- MaÃŸnahmen-Roadmap ---
// KW-Range: KW01 (30.12.) bis KW13 (24.03.)
const roadmapItems = [
    { name: "AOV-Booster Plugin", start: 7, end: 9, phase: "Rollout â†’ A/B-Test â†’ Ergebnisse", color: "var(--orange)" },
    { name: "Amazon USA Launch", start: 5, end: 13, phase: "Setup â†’ Listings â†’ Go-Live", color: "var(--blue)" },
    { name: "UK Fulfilmentcrowd", start: 3, end: 10, phase: "Verhandlung â†’ Vertragsabschluss", color: "var(--purple)" },
    { name: "JEBG3 Defect Fix", start: 7, end: 9, phase: "Analyse â†’ Prozessfix", color: "var(--red)" },
    { name: "Beiersdorf Produktliste", start: 6, end: 8, phase: "Abstimmung â†’ Umsetzung", color: "var(--yellow)" },
    { name: "INCI-Check Tool", start: 1, end: 7, phase: "Entwicklung â†’ Live", color: "var(--green)" }
];
const currentKW = 9; // Aktuelle Kalenderwoche
const kwStart = 1;
const kwEnd = 13;

// --- Innovation & Automatisierung ---
const projekte = [
    { name: "INCI-Check", icon: "&#128300;", beschreibung: "Automatisierte Inhaltsstoff-PrÃ¼fung fÃ¼r Produktmanagement. Ersetzt manuelle Recherche und Compliance-Checks.", einsparung: "~10 Stunden/Woche", impact_detail: "FÃ¼r PM-Team (Judith)", status: "live", statusLabel: "Live" },
    { name: "KI-Chatbot", icon: "&#129302;", beschreibung: "KI-gestÃ¼tzter Kundenservice-Bot fÃ¼r hÃ¤ufige Anfragen. Reduziert Ticket-Volumen und beschleunigt Antwortzeiten.", einsparung: "~20.000â‚¬/Jahr (Ziel)", impact_detail: "Kundenservice-Entlastung", status: "in_development", statusLabel: "In Entwicklung" },
    { name: "Reporting-Automatisierung", icon: "&#128202;", beschreibung: "Automatisierte Dashboards fÃ¼r Webshop & Amazon. Ersetzt manuelle Excel-Auswertungen und ermÃ¶glicht Echtzeit-Tracking.", einsparung: "~5 Stunden/Woche", impact_detail: "Marketing & Management", status: "live", statusLabel: "Live" },
    { name: "CRO Popup-Optimierung", icon: "&#127919;", beschreibung: "Datengetriebene A/B-Tests fÃ¼r Conversion-Optimierung im Webshop. KI-gestÃ¼tzte Analyse und Empfehlungen.", einsparung: "+0,2% CR (Ziel)", impact_detail: "Webshop Performance", status: "in_development", statusLabel: "In Arbeit" }
];

// --- UmsatzÃ¼bersicht ---
// Webshop YTD: Summe aller TagesumsÃ¤tze aus Jessis Reporting (01.01.-25.02.2026)
// Amazon YTD: Summe aus Budget Tracker Excel (DE KW1-7, UK KW1-6, USA KW1-7)
const umsatz = {
    webshop: {
        label: "Webshop J&L",
        ist: 604580, // YTD Summe aus 56 Tagen Jessis Reporting
        plan: null,  // Kein explizites Umsatzziel fÃ¼r Webshop Q1 definiert
        zeitraum: "YTD (01.01.â€“25.02.)",
        detail: "56 Tage | Ã˜ 10.796â‚¬/Tag | 13.275 Bestellungen",
        color: "var(--green)"
    },
    amazon: {
        label: "Amazon J&L (alle MÃ¤rkte)",
        ist: 1376070, // DE 1.150.725â‚¬ + UK 27.153â‚¬ + USA 20.259â‚¬ + IT Feb + EU Jan
        plan: 2147000, // Q1 Prognose (11,3 Mio â‚¬ Jahresprognose = 19%)
        planJahr: 11300000, // Jahresprognose
        linearPlan: 825769, // Linearer Plan fÃ¼r KW1-5 (2.147.000 * 5/13)
        dataWeeks: 7, // Wochen mit Daten
        totalWeeks: 13, // Q1 Gesamtwochen
        zeitraum: "YTD (KW1â€“KW7)",
        detail: "DE/USA KW7, UK KW6 | IT Feb | ES/FR/NL/SE Jan eingetragen",
        monatsPlan: { jan: 791000, feb: 565000 }, // Aus DE Budget Tracker (ERP Monthly Plan)
        color: "var(--accent)"
    }
};

// --- Amazon LÃ¤nder ---
// Daten aus Budget Tracker Excel (OneDrive), aktualisiert Mi wÃ¶chentlich
// Total Sales Amazon = Paid + Organic Sales
const amazonLaender = [
    { flag: "&#127465;&#127466;", name: "Deutschland", budgetQ1: 60500, istQ1: 1150725, adSpend: 32232, roas: 14.22, orders: 79884, budgetJahr: 320000, status: "active", datenstand: "KW1â€“7" },
    { flag: "&#127468;&#127463;", name: "UK", budgetQ1: 20000, istQ1: 27153, adSpend: 9334, roas: 2.20, orders: 2209, budgetJahr: 100000, status: "growth", datenstand: "KW1â€“6", note: "GBPâ†’EUR" },
    { flag: "&#127466;&#127480;", name: "Spanien", budgetQ1: 9360, istQ1: 48565, adSpend: 3475, roas: null, orders: null, budgetJahr: 46800, status: "active", datenstand: "Jan '26" },
    { flag: "&#127467;&#127479;", name: "Frankreich", budgetQ1: 7600, istQ1: 44011, adSpend: 3215, roas: null, orders: null, budgetJahr: 39800, status: "active", datenstand: "Jan '26" },
    { flag: "&#127470;&#127481;", name: "Italien", budgetQ1: 10080, istQ1: 68985, adSpend: 5479, roas: null, orders: null, budgetJahr: 50400, status: "active", datenstand: "Feb '26" },
    { flag: "&#127475;&#127473;", name: "Niederlande", budgetQ1: 1200, istQ1: 11277, adSpend: 600, roas: null, orders: null, budgetJahr: 5000, status: "active", datenstand: "Jan '26" },
    { flag: "&#127480;&#127466;", name: "Schweden", budgetQ1: 14325, istQ1: 5094, adSpend: 637, roas: null, orders: null, budgetJahr: 57300, status: "new", datenstand: "Jan '26" },
    { flag: "&#127482;&#127480;", name: "USA", budgetQ1: null, istQ1: 20259, adSpend: 12656, roas: 0.71, orders: 708, budgetJahr: null, status: "launch", datenstand: "KW1â€“7", note: "USDâ†’EUR" }
];

// --- Artikelgruppen (Platzhalter fÃ¼r Power BI Daten) ---
const kategorien = [
    { name: "Haare", umsatz: null, anteil: 35, trend: "stable", color: "var(--blue)" },
    { name: "KÃ¶rper", umsatz: null, anteil: 22, trend: "stable", color: "var(--green)" },
    { name: "Home", umsatz: null, anteil: 9, trend: "up", color: "var(--orange)", ziel: "11%" },
    { name: "HÃ¤nde", umsatz: null, anteil: 12, trend: "stable", color: "var(--cyan)" },
    { name: "Gesichtspflege", umsatz: null, anteil: 8, trend: "up", color: "var(--pink)" },
    { name: "Parfum", umsatz: null, anteil: 6, trend: "down", color: "var(--purple)" },
    { name: "MÃ¤nner", umsatz: null, anteil: 5, trend: "stable", color: "var(--yellow)" },
    { name: "Sonstige", umsatz: null, anteil: 3, trend: "stable", color: "var(--muted)" }
];

// ============================================================
//  RENDERING
// ============================================================

function fmt(v) { return v == null ? 'â€“' : v.toLocaleString('de-DE'); }
function fmt2(v) { return v == null ? 'â€“' : v.toLocaleString('de-DE', { minimumFractionDigits: 2, maximumFractionDigits: 2 }); }

// --- Section 1: KPI Cards ---
function renderKPIs() {
    const grid = document.getElementById('kpiGrid');
    grid.innerHTML = kpis.map(k => {
        const pct = typeof k.ist === 'number' && typeof k.ziel === 'number' ? Math.round((k.ist / k.ziel) * 100) : 0;
        const trendIcon = k.trend === 'up' ? '&#8599;' : k.trend === 'down' ? '&#8600;' : '&#8594;';
        const zielDisplay = k.subtitle ? k.subtitle : ('Ziel: ' + (k.ziel >= 1000000 ? fmt2(k.ziel / 1000000) + ' Mio ' + k.unit : fmt2(k.ziel) + ' ' + k.unit));

        // Spezialfall: Amazon mit Plan-Vergleich (linearPlan vorhanden)
        if (k.linearPlan) {
            const diff = k.ist - k.linearPlan;
            const ahead = diff > 0;
            const aheadPct = ((k.ist / k.linearPlan) - 1) * 100;
            const istStr = (k.ist / 1000).toFixed(0) + 'K ' + k.unit;
            const planStr = (k.linearPlan / 1000).toFixed(0) + 'K ' + k.unit;
            const diffStr = (Math.abs(diff) / 1000).toFixed(0) + 'K ' + k.unit;
            const zielStr = fmt2(k.ziel / 1000000) + ' Mio ' + k.unit;
            const badgeClass = ahead ? 'badge-green' : 'badge-red';
            const badgeText = ahead ? '+' + aheadPct.toFixed(1) + '% Ã¼ber Plan' : aheadPct.toFixed(1) + '% unter Plan';

            return `<div class="card kpi-card" style="border-color:${ahead ? 'rgba(74,124,89,0.3)' : 'rgba(229,36,39,0.3)'}">
                <div class="kpi-header">
                    <span class="kpi-name">${k.name}</span>
                    <span class="badge ${badgeClass}">${badgeText}</span>
                </div>
                <div class="kpi-values">
                    <span class="kpi-ist" style="color: var(${k.color})">${fmt(Math.round(k.ist))} ${k.unit}</span>
                </div>
                <div style="font-size:13px;margin-bottom:12px;">
                    <span style="color:var(--muted)">Q1-Ziel:</span> <strong>${zielStr}</strong>
                    <span style="color:var(--muted);margin-left:8px;">|</span>
                    <span style="color:var(--muted);margin-left:8px;">Nach ${k.dataWeeks} von ${k.totalWeeks} Wochen</span>
                </div>
                <div style="display:flex;align-items:center;gap:10px;padding:10px 14px;background:${ahead ? 'rgba(74,124,89,0.08)' : 'rgba(229,36,39,0.08)'};border-radius:8px;margin-bottom:10px;">
                    <span style="font-size:20px">${ahead ? '&#9650;' : '&#9660;'}</span>
                    <div>
                        <div style="font-size:14px;font-weight:700;color:${ahead ? 'var(--green)' : 'var(--red)'}">
                            ${diffStr} ${ahead ? 'Ã¼ber' : 'unter'} Plan
                        </div>
                        <div style="font-size:12px;color:var(--muted)">
                            Erwartet bis KW${k.dataWeeks}: ${planStr} &#8594; TatsÃ¤chlich: ${istStr}
                        </div>
                    </div>
                </div>
                <div class="kpi-context" style="font-size:11px;color:var(--muted)">&#9432; ${k.massnahme}</div>
            </div>`;
        }

        // Standardfall: AOV, CR etc.
        const fillColor = pct >= 95 ? 'var(--green)' : pct >= 80 ? 'var(--yellow)' : 'var(--orange)';
        const istDisplay = k.ist >= 1000000 ? fmt2(k.ist / 1000000) + ' Mio ' + k.unit : fmt2(k.ist) + ' ' + k.unit;

        return `<div class="card kpi-card">
            <div class="kpi-header">
                <span class="kpi-name">${k.name}</span>
                <span class="kpi-trend">${trendIcon}</span>
            </div>
            <div class="kpi-values">
                <span class="kpi-ist" style="color: var(${k.color})">${istDisplay}</span>
                <span class="kpi-pct" style="color: ${fillColor}">${pct}%</span>
            </div>
            <div class="kpi-bar"><div class="kpi-fill" style="width: ${Math.min(pct, 100)}%; background: ${fillColor};"></div></div>
            <div style="font-size: 12px; color: var(--muted); margin-bottom: 6px;">${zielDisplay}</div>
            <div class="kpi-context">&#9881; <strong>${k.massnahme}</strong></div>
        </div>`;
    }).join('');
}

// --- UmsatzÃ¼bersicht ---
function renderUmsatz() {
    const grid = document.getElementById('revGrid');

    // Webshop Card
    const ws = umsatz.webshop;
    const wsIstStr = fmt(Math.round(ws.ist)) + 'â‚¬';

    // Amazon Card mit Plan-Vergleich
    const am = umsatz.amazon;
    const amIstStr = fmt(Math.round(am.ist)) + 'â‚¬';
    const amPlanQ1Str = fmt2(am.plan / 1000000) + ' Mio â‚¬';
    const amPlanJahrStr = fmt2(am.planJahr / 1000000) + ' Mio â‚¬';
    const amPctQ1 = Math.round((am.ist / am.plan) * 100);
    const amZeitPct = Math.round((am.dataWeeks / am.totalWeeks) * 100);
    const amLinearDiff = am.ist - am.linearPlan;
    const amLinearPct = ((am.ist / am.linearPlan) - 1) * 100;
    const amAheadOfPlan = amLinearDiff > 0;

    grid.innerHTML = `
        <div class="card rev-card">
            <div class="rev-label">${ws.label}</div>
            <div class="rev-total" style="color:${ws.color}">${wsIstStr}</div>
            <div class="rev-plan">Kein explizites Q1-Umsatzziel definiert</div>
            <div class="rev-bar"><div class="rev-fill" style="width:50%; background:${ws.color};"></div></div>
            <div class="rev-detail">${ws.zeitraum} | ${ws.detail}</div>
        </div>
        <div class="card rev-card" style="border-color: ${amAheadOfPlan ? 'rgba(74,124,89,0.4)' : 'var(--border)'};">
            <div class="rev-label" style="display:flex;justify-content:space-between;align-items:center;">
                ${am.label}
                ${amAheadOfPlan ? '<span class="badge badge-green">Ãœber Plan</span>' : '<span class="badge badge-yellow">Unter Plan</span>'}
            </div>
            <div class="rev-total" style="color:${am.color}">${amIstStr}</div>
            <div style="display:flex;gap:16px;margin-bottom:10px;flex-wrap:wrap;">
                <div style="font-size:12px;">
                    <span style="color:var(--muted)">Q1 Ziel:</span>
                    <strong>${amPlanQ1Str}</strong>
                    <span class="pct-badge" style="background:rgba(34,28,22,0.06);color:var(--accent);margin-left:4px">${amPctQ1}%</span>
                </div>
                <div style="font-size:12px;">
                    <span style="color:var(--muted)">Jahresprognose:</span>
                    <strong>${amPlanJahrStr}</strong>
                </div>
            </div>
            <div style="display:flex;align-items:center;gap:8px;padding:8px 12px;background:${amAheadOfPlan ? 'rgba(74,124,89,0.08)' : 'rgba(229,36,39,0.08)'};border-radius:6px;margin-bottom:8px;">
                <span style="font-size:16px">${amAheadOfPlan ? '&#9650;' : '&#9660;'}</span>
                <span style="font-size:13px;font-weight:700;color:${amAheadOfPlan ? 'var(--green)' : 'var(--red)'}">
                    ${fmt(Math.abs(Math.round(amLinearDiff)))}â‚¬ ${amAheadOfPlan ? 'Ã¼ber' : 'unter'} Plan
                </span>
                <span style="font-size:11px;color:var(--muted)">
                    (Erwartet nach ${am.dataWeeks} von ${am.totalWeeks} Wochen: ${fmt(Math.round(am.linearPlan))}â‚¬)
                </span>
            </div>
            <div class="rev-detail">${am.zeitraum} | ${am.detail}</div>
        </div>`;
}

// --- Amazon LÃ¤nder ---
function renderCountries() {
    const card = document.getElementById('countryCard');
    const statusLabels = { active: '', growth: 'Wachstum', new: 'Neu', launch: 'Launch Q1' };
    const statusClasses = { active: '', growth: 'badge-blue', new: 'badge-purple', launch: 'badge-yellow' };

    let rows = amazonLaender.map(l => {
        const istStr = l.istQ1 ? fmt(Math.round(l.istQ1)) + 'â‚¬' : '<span style="color:var(--muted)">â€“</span>';
        const roasStr = l.roas != null ? fmt2(l.roas) : '<span style="color:var(--muted)">â€“</span>';
        const roasColor = l.roas != null ? (l.roas >= 3 ? 'var(--green)' : l.roas >= 1.5 ? 'var(--yellow)' : 'var(--red)') : 'var(--muted)';
        const ordersStr = l.orders != null ? fmt(l.orders) : '<span style="color:var(--muted)">â€“</span>';
        const budgetJahrStr = l.budgetJahr ? fmt(Math.round(l.budgetJahr)) + 'â‚¬' : '<span style="color:var(--muted)">TBD</span>';
        const statusTag = statusLabels[l.status] ? ` <span class="badge ${statusClasses[l.status]}">${statusLabels[l.status]}</span>` : '';
        const datenstandStr = l.datenstand !== 'â€“' ? `<span style="font-size:10px;color:var(--muted)">${l.datenstand}</span>` : '';

        return `<tr>
            <td><span class="country-flag">${l.flag}</span>${l.name}${statusTag}</td>
            <td class="num">${istStr} ${datenstandStr}</td>
            <td class="num">${ordersStr}</td>
            <td class="num" style="color:${roasColor};font-weight:600">${roasStr}</td>
            <td class="num">${budgetJahrStr}</td>
        </tr>`;
    }).join('');

    // Totals
    const totalIst = amazonLaender.reduce((s,l) => s + (l.istQ1 || 0), 0);
    const totalOrders = amazonLaender.reduce((s,l) => s + (l.orders || 0), 0);
    const totalBudgetJahr = amazonLaender.reduce((s,l) => s + (l.budgetJahr || 0), 0);

    card.innerHTML = `<table class="country-table">
        <thead><tr>
            <th>Land</th>
            <th class="num">Umsatz (Ist)</th>
            <th class="num">Bestellungen</th>
            <th class="num">Ad ROAS</th>
            <th class="num">Ad Budget 2026</th>
        </tr></thead>
        <tbody>
            ${rows}
            <tr class="total-row">
                <td>GESAMT (erfasst)</td>
                <td class="num" style="color:var(--accent)">${fmt(Math.round(totalIst))}â‚¬</td>
                <td class="num" style="color:var(--accent)">${fmt(totalOrders)}</td>
                <td class="num">â€“</td>
                <td class="num" style="color:var(--accent)">${fmt(Math.round(totalBudgetJahr))}â‚¬</td>
            </tr>
        </tbody>
    </table>
    <div style="font-size:11px;color:var(--muted);margin-top:12px;padding:8px 12px;background:rgba(63,90,63,0.06);border-radius:6px;">
        &#9432; Quelle: Budget Tracker Excel (OneDrive, Mi-Update). DE dominiert mit 97% der erfassten UmsÃ¤tze.
        ES, FR, IT, NL, SE haben noch keine 2026-Daten im Tracker. USA-ROAS kritisch niedrig (0,74) â€“ Marktaufbau-Phase.
    </div>`;
}

// --- Section 2: Rocks ---
function renderSteine() {
    const counts = { green: 0, yellow: 0, red: 0 };
    steine.forEach(s => counts[s.status]++);

    document.getElementById('steineSummary').innerHTML =
        `<span class="sum-item" style="color:var(--green)">&#9679; ${counts.green} On Track</span>` +
        `<span class="sum-item" style="color:var(--yellow)">&#9679; ${counts.yellow} At Risk</span>` +
        `<span class="sum-item" style="color:var(--red)">&#9679; ${counts.red} Blocker</span>`;

    document.getElementById('steineGrid').innerHTML = steine.map(s => {
        const statusEmoji = s.status === 'green' ? '&#9989;' : s.status === 'yellow' ? '&#9888;&#65039;' : '&#128308;';
        return `<div class="card stein-card ${s.status}">
            <div class="stein-name">${statusEmoji} ${s.name}</div>
            <div class="stein-detail">${s.detail} &middot; <span class="owner">${s.owner}</span></div>
            <div class="stein-meilenstein">&#8594; ${s.meilenstein} <span style="color:var(--muted)">(${s.deadline})</span></div>
        </div>`;
    }).join('');
}

// --- Section 3: Fuck-ups ---
function renderFuckups() {
    document.getElementById('fuckupList').innerHTML = fuckups.map(f => {
        const badgeClass = f.status === 'active' ? 'badge-red' : 'badge-green';
        const badgeText = f.status === 'active' ? 'Offen' : 'GelÃ¶st';
        return `<div class="card fuckup-card ${f.status === 'resolved' ? 'resolved' : ''}">
            <div class="fuckup-header">
                <span class="fuckup-problem">${f.problem}</span>
                <span class="badge ${badgeClass}">${badgeText}</span>
            </div>
            <div class="fuckup-row">
                <span class="fuckup-label">Impact</span><span>${f.impact}</span>
                <span class="fuckup-label">MaÃŸnahme</span><span>${f.massnahme}</span>
                <span class="fuckup-label">Owner</span><span>${f.owner}</span>
                <span class="fuckup-label">Deadline</span><span style="color:var(--yellow);font-weight:600">${f.deadline}</span>
            </div>
        </div>`;
    }).join('');
}

// --- Section 4: Roadmap ---
function renderRoadmap() {
    const container = document.getElementById('roadmap');
    const totalKWs = kwEnd - kwStart + 1;

    // KW Header
    let kwHeader = '<div style="display:flex; padding-left:192px; margin-bottom:4px;">';
    for (let kw = kwStart; kw <= kwEnd; kw++) {
        const w = 100 / totalKWs;
        kwHeader += `<span style="width:${w}%; text-align:center; font-size:10px; color:var(--muted); ${kw === currentKW ? 'color:var(--red);font-weight:700' : ''}">${kw}</span>`;
    }
    kwHeader += '</div>';

    // Rows
    let rows = roadmapItems.map(item => {
        const leftPct = ((item.start - kwStart) / totalKWs) * 100;
        const widthPct = ((item.end - item.start + 1) / totalKWs) * 100;
        const nowPct = ((currentKW - kwStart + 0.5) / totalKWs) * 100;

        return `<div class="roadmap-row">
            <div class="roadmap-label">${item.name}</div>
            <div class="roadmap-track">
                <div class="roadmap-bar" style="left:${leftPct}%; width:${widthPct}%; background:${item.color};">${item.phase}</div>
                <div class="roadmap-now" style="left:${nowPct}%"></div>
            </div>
        </div>`;
    }).join('');

    container.innerHTML = kwHeader + rows;
}

// --- Section 5: Innovation ---
function renderInnovation() {
    document.getElementById('innovationGrid').innerHTML = projekte.map(p => {
        const statusClass = p.status === 'live' ? 'badge-green' : p.status === 'in_development' ? 'badge-yellow' : 'badge-muted';
        const impactClass = p.status === 'live' ? '' : 'planned';
        return `<div class="card innovation-card">
            <div class="innovation-icon">${p.icon}</div>
            <div class="innovation-content">
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:4px;">
                    <span class="innovation-name">${p.name}</span>
                    <span class="badge ${statusClass}">${p.statusLabel}</span>
                </div>
                <div class="innovation-desc">${p.beschreibung}</div>
                <div class="innovation-impact ${impactClass}">${p.einsparung}</div>
                <div style="font-size:11px;color:var(--muted);margin-top:2px;">${p.impact_detail}</div>
            </div>
        </div>`;
    }).join('');
}

// --- Section 6: Kategorien ---
function renderKategorien() {
    const card = document.getElementById('kategorienCard');
    const trendIcons = { up: '&#8599;', down: '&#8600;', stable: '&#8594;' };
    const trendColors = { up: 'var(--green)', down: 'var(--red)', stable: 'var(--muted)' };

    let rows = kategorien.map(k => {
        const barWidth = k.anteil || 0;
        const umsatzStr = k.umsatz ? fmt(Math.round(k.umsatz)) + 'â‚¬' : '<span style="color:var(--muted)">ausstehend</span>';
        const zielTag = k.ziel ? ` <span class="badge badge-blue">Ziel: ${k.ziel}</span>` : '';

        return `<div class="kategorie-row">
            <div class="kategorie-name">${k.name}${zielTag}</div>
            <div class="kategorie-bar-wrap">
                <div class="kategorie-fill" style="width:${barWidth}%; background:${k.color};">${barWidth}%</div>
            </div>
            <div class="kategorie-values">${umsatzStr}</div>
            <div class="kategorie-trend" style="color:${trendColors[k.trend]}">${trendIcons[k.trend]}</div>
        </div>`;
    }).join('');

    const note = kategorien.some(k => k.umsatz === null)
        ? `<div class="kategorie-note">&#9432; Umsatzdaten aus Power BI ausstehend. Anteile sind SchÃ¤tzwerte. NÃ¤chstes Update nach Power BI Export.</div>`
        : '';

    card.innerHTML = rows + note;
}

// --- Datenstand-Banner ---
function renderFreshness() {
    const banner = document.getElementById('freshnessBanner');
    const items = [
        { icon: '&#128722;', label: 'Webshop', datum: datenstand.webshop.datum, quelle: datenstand.webshop.quelle },
        { icon: '&#127758;', label: 'Amazon', datum: datenstand.amazon.datum, quelle: datenstand.amazon.quelle },
        { icon: '&#128197;', label: 'Dashboard', datum: datenstand.dashboard.datum, quelle: datenstand.dashboard.autor }
    ];
    banner.innerHTML = items.map(i =>
        `<div style="display:flex;align-items:center;gap:8px;padding:6px 14px;background:rgba(63,90,63,0.08);border:1px solid var(--border);border-radius:8px;font-size:12px;">
            <span style="font-size:16px">${i.icon}</span>
            <span style="color:var(--muted)">${i.label}:</span>
            <strong style="color:var(--text)">${i.datum}</strong>
            <span style="color:var(--muted);font-size:11px">(${i.quelle})</span>
        </div>`
    ).join('');
}

// --- Render All ---
renderFreshness();
document.getElementById('dashboardFooter').innerHTML =
    `J&L CEO Dashboard | Letzte Aktualisierung: ${datenstand.dashboard.datum} | Webshop-Daten: ${datenstand.webshop.datum} | Amazon-Daten: ${datenstand.amazon.datum}<br>NÃ¤chstes Update: 17.02.2026 (Montag) | Erstellt mit Claude Code`;
renderKPIs();
renderUmsatz();
renderCountries();
renderSteine();
renderFuckups();
renderRoadmap();
renderInnovation();
renderKategorien();
</script>
<script>
// â”€â”€â”€ SYNC MIT JL_DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Ãœberschreibt hardcodierte Werte mit den aktuellen Zahlen aus data.js
(function() {
  if (!window.JL_DATA) return;
  const D = window.JL_DATA;
  const am = D.amazon;

  // Datenstand aktualisieren
  if (window.datenstand) {
    datenstand.amazon.datum  = D.stand.amazon_weekly;
    datenstand.webshop.datum = D.stand.webshop;
    datenstand.dashboard.datum = D.stand.dashboard;
  }
  // Header-Meta live aktualisieren
  const headerMeta = document.getElementById('header-meta');
  if (headerMeta) {
    headerMeta.textContent = `Stand: ${D.stand.dashboard} | Datenquellen: Jessis Reporting, Amazon Allocation, Power BI`;
  }

  // Amazon Q1 KPI
  if (window.kpis && kpis[2]) {
    kpis[2].ist = am.ytd_gesamt;
    kpis[2].linearPlan = Math.round(am.q1_plan / 13 * am.data_weeks);
    kpis[2].ziel = am.q1_plan;
    kpis[2].dataWeeks = am.data_weeks;
  }

  // Umsatz-Block
  if (window.umsatz) {
    umsatz.amazon.ist = am.ytd_gesamt;
    umsatz.amazon.plan = am.q1_plan;
    umsatz.amazon.planJahr = am.jahresprognose;
  }

  // LÃ¤ndertabelle
  if (window.amazonLaender) {
    const l = am.laender;
    // DE
    if (amazonLaender[0]) { amazonLaender[0].istQ1 = l.DE.ytd; amazonLaender[0].adSpend = l.DE.spend; amazonLaender[0].roas = l.DE.paid_roas; amazonLaender[0].orders = l.DE.orders; }
    // UK
    if (amazonLaender[1]) { amazonLaender[1].istQ1 = l.UK.ytd; amazonLaender[1].adSpend = l.UK.spend; amazonLaender[1].roas = l.UK.paid_roas; amazonLaender[1].orders = l.UK.orders; }
    // ES
    if (amazonLaender[2]) { amazonLaender[2].istQ1 = l.ES.ytd; }
    // FR
    if (amazonLaender[3]) { amazonLaender[3].istQ1 = l.FR.ytd; }
    // IT
    if (amazonLaender[4]) { amazonLaender[4].istQ1 = l.IT.ytd; }
    // NL
    if (amazonLaender[5]) { amazonLaender[5].istQ1 = l.NL.ytd; }
    // SE
    if (amazonLaender[6]) { amazonLaender[6].istQ1 = l.SE.ytd; }
    // USA
    if (amazonLaender[7]) { amazonLaender[7].istQ1 = l.USA.ytd; amazonLaender[7].adSpend = l.USA.spend; amazonLaender[7].roas = l.USA.paid_roas; amazonLaender[7].orders = l.USA.orders; }
  }

  // Re-render mit neuen Daten
  if (typeof renderKPIs === 'function') renderKPIs();
  if (typeof renderUmsatz === 'function') renderUmsatz();
  if (typeof renderCountries === 'function') renderCountries();
  if (typeof renderFreshness === 'function') renderFreshness();
})();
</script>
</body>
</html>
